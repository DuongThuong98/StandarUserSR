{{#section 'css'}}
<style>
  .rounded {
    height: 80px;
    width: 80px;
    border-style: dotted;
  }

  .bidder-name,
  .seller-name,
  .time-left {
    font-size: 15px;
    padding-top: 12px;
    border-top: 1px solid #e5e5e5;
    margin-bottom: 15px
  }

</style>
{{/section}}

<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from htmlmystore.justthemevalley.com/single_post.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Mar 2020 08:37:58 GMT -->

<head>
  <!-- Basic page needs -->
  <meta charset="utf-8">
  <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <![endif]-->
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MyStore premium HTML5 &amp; CSS3 template</title>
  <meta name="description"
    content="best template, template free, responsive theme, fashion store, responsive theme, responsive html theme, Premium website templates, web templates, Multi-Purpose Responsive HTML5 Template">
  <meta name="keywords"
    content="bootstrap, ecommerce, fashion, layout, responsive, responsive template, responsive template download, responsive theme, retail, shop, shopping, store, Premium website templates, web templates, Multi-Purpose Responsive HTML5 Template" />

  <!-- Mobile specific metas  -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicon  -->
  <link rel="shortcut icon" type="/image/x-icon" href="/favicon.ico">

  <!-- Google Fonts -->
  <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700italic,700,400italic' rel='stylesheet'
    type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i' rel='stylesheet'
    type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Dosis:400,300,200,500,600,700,800' rel='stylesheet'
    type='text/css'>

  <!-- CSS Style -->

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">

  <!-- font-awesome & simple line icons CSS -->
  <link rel="stylesheet" type="text/css" href="/css/font-awesome.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/simple-line-icons.css" media="all">

  <!-- owl.carousel CSS -->
  <link rel="stylesheet" type="text/css" href="/css/owl.carousel.css">
  <link rel="stylesheet" type="text/css" href="/css/owl.theme.css">
  <link rel="stylesheet" type="text/css" href="/css/owl.transitions.css">
  <!-- animate CSS  -->
  <link rel="stylesheet" type="text/css" href="/css/animate.css" media="all">

  <!-- flexslider CSS -->
  <link rel="stylesheet" type="text/css" href="/css/flexslider.css">

  <!-- Revolution Slider CSS -->
  <link href="/css/revolution-slider.css" rel="stylesheet">
  <!-- jquery-ui.min CSS  -->
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css">



  <!-- blog CSS -->
  <link rel="stylesheet" type="text/css" href="/css/blog.css" media="all">

  <!-- style CSS -->
  <link rel="stylesheet" type="text/css" href="/css/style.css" media="all">

  <script src="https://kit.fontawesome.com/166a70ea35.js" crossorigin="anonymous"></script>
</head>
<style>
  .rounded {
    height: 80px;
    width: 80px;
    border-style: dotted;
  }

  .created-day {
    font-size: 15px;
    margin-bottom: 15px
  }

  .product-cart-option {
    border-top: 1px solid #e5e5e5;
    display: inline-block;
  }

  .flex-container {
    display: flex;
    flex-wrap: wrap;

  }
</style>

<body class="single_post_page">


  <div id="page">



 <!-- Main Container -->
<div class="main-container col1-layout">
  <div class="container">
    <div class="row">
      <div class="col-main">

      </div>
      <div class="product-overview-tab">
        <div class="container">
          <div class="row">
            <div class="col-xs-12">
              <div class="product-tab-inner">
                <ul id="product-detail-tab" class="nav nav-tabs product-tabs" style="  display: flex;">
                  <div hidden class="timeLeft" content="{{timeLeft}}"></div>
                  <input type="hidden" name="timeStart" value="{{timeStart}}" id="timeStart">
                  <div hidden class="amountQuiz" content="{{amountQuiz}}"></div>

                  <li class="active"> <a href="#description" data-toggle="tab"> Bài làm</a>
                  </li>

                  <li><button type="button" class="btn btn-primary" id="save" mockID="{{this.mocktest._id}}">Lưu
                      lại</button></li>
                  <li><button type="button" class="btn btn-primary" onclick="submit()">Nộp
                      bài</button></li>

                  <!-- thời gian còn lại/ -->
                  <li>
                    <div class="upload-date" style="display: grid;">
                      <div class="countbox_1 jtv-timer-grid count_2" value="count_2" timerun="01/03/2020 12:00:00 AM"
                        style="  display: flex;
                                                            flex-direction: row;
                                                            justify-content: space-around;
                                                            margin-bottom: 10px;
                                                            width: 200px; 
                                                            float: left;
                                                            background-color: pink;">

                        <div class="hour box-time-date"><span class="time-num">00</span>Hrs</div>
                        <div class="min box-time-date"><span class="time-num">00</span>Mins</div>
                        <div class="sec box-time-date"><span class="time-num">00</span>Secs</div>
                      </div>
                    </div>

                  </li>

                </ul>

                <div id="productTabContent" class="tab-content">
                  <div class="tab-pane fade in active" id="description">
                    <div class="std" style="margin-left: 30px;">


                       <div id="tab-a6bfee399f4791567a15c5309524f5ac" class="tab-content current">


                        <!--End-->
                        <ul class="questions col-md-12 col-sm-12 col-xs-12">
                          <li class="row">

                            <div class="col-sm-3">
                              <select class="input form-control audiolinks" name="audiolinks">
                                <option selected="true" disabled="disabled">Chọn </option>
                                {{#each this.mocktest.audioLinks}}
                                <option value="{{this}}">{{this}}</option>
                                {{/each}}
                              </select>
                            </div>
                            <div class="col-sm-3 ">

                              <audio id="audio" controls="controls">
                                <source id="audioSource" src="">
                                </source>
                                Your browser does not support the audio format.
                              </audio>
                            </div>
                    

                          </li>
                          <h3><span>Questions</span></h3>
                          <form method="POST" name="frmCompletedTest" novalidate 
                          action="/user/mocktest/submit" id="frmCompletedTest">
                          <input type="hidden" name="_id" value="{{this.mocktest._id}}">
                            <input type="hidden" name="timeStart" value="{{timeStart}}" id="timeStart">
                            
                            <div class="col-sm-3 answer-area" height="500" style=" height: 500px;
                                                                        overflow: scroll;">
                              {{!-- 40 CÂU TRẢ LỜI --}}
                              {{#each mocktest.answerKeys}}
                              <h5>{{this.number}}</h5>

                              {{#if this.keyABC}}

                              {{#if this.single}}


                              {{#each this.keyABC}}
                              {{#if this.chose}}
                              <input type="radio" name="answerKeys_{{../number}}" id="name{{../number}}_{{this.alpha}}"
                                value="{{this.alpha}}" class="my-form-{{../number}}" checked>
                              {{else}}
                              <input type="radio" name="answerKeys_{{../number}}" id="name{{../number}}_{{this.alpha}}"
                                value="{{this.alpha}}" class="my-form-{{../number}}">
                              {{/if}}
                              <label for="name{{../number}}_{{this.alpha}}">{{this.alpha}} {{this.detail}} </label>
                              {{/each}}
                             

                              {{!-- CHƯA LÀM CÁI NHIỀU SỰ LỰA CHỌN --}}
                              {{else}}

                             
                              <div class="flex-container">
                                {{#each this.keyABC}}
                                {{#if this.chose}}
                                <input type="checkbox" name="answerKeys_{{../number}}" id="track" value="{{this.alpha}}"
                                  checked class="my-form-{{../number}}"/>
                                {{else}}
                                <input type="checkbox" name="answerKeys_{{../number}}" id="track" value="{{this.alpha}}"
                                 class="my-form-{{../number}}"/>
                                {{/if}}
                                <label for="track">{{this.alpha}} {{this.detail}}</label>
                                {{/each}}
                              </div>
                           

                              {{/if}}
                              {{!-- CHƯA LÀM CÁI NHIỀU SỰ LỰA CHỌN --}}

                              {{else}}

                              <input type='text' class='input form-control my-form-{{this.number}}' value="{{this.key}}"
                                name='answerKeys_{{this.number}}' >
                         
                              {{/if}}

                              {{/each}}


                          </form>
                      </div>

                       <div class="col-sm-9">
                        <iframe src="https://mielts.s3.ap-southeast-1.amazonaws.com/{{this.mocktest.questionLink}}" height="500" width="100%"></iframe>
                      </div>

                    </div>
                  </div>


                </div>
                     <button type="submit" class="btn btn-warning" style="margin-top: 10px;"
                     onclick="window.location = '/user/mocktest';">
                  <i class="fa fa-check" aria-hidden="true"></i>Trở về
                </button>

           
                <button type="button" class="btn btn-danger" style="margin-top: 10px;">Thoát</button>
              </div>
            </div>
          </div>
        </div>
      </div>







    </div>
  </div>
</div>

<!-- Main Container End -->


    <div id="myMessage" class="modal fade" role="dialog">
      <div class="modal-dialog modal-md">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title"> message </h4>
          </div>
          <div class="modal-body">
            <p> <i>...</i> đã thêm vào danh sách yêu thích</p>
            <p><a href="/user/wishlist"> Xem danh sách</a></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default reload_page_button" data-dismiss="modal">Đóng</button>
          </div>
        </div>
      </div>
    </div>
    <!-- JS -->

    <!-- jquery js -->
    <script type="text/javascript" src="/js/jquery.min.js"></script>

    {{!-- jquery validate --}}
    <script type="text/javascript"
      src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>

    <!-- bootstrap js -->
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>


    <!-- owl.carousel.min js -->
    <script type="text/javascript" src="/js/owl.carousel.min.js"></script>

    <!-- bxslider js -->
    <script type="text/javascript" src="/js/jquery.bxslider.js"></script>

    <!-- Slider Js -->
    <script type="text/javascript" src="/js/revolution-slider.js"></script>

    <!-- megamenu js -->
    <script type="text/javascript" src="/js/megamenu.js"></script>
    <script type="text/javascript">
      /* <![CDATA[ */
      var mega_menu = '0';

      /* ]]> */
    </script>

    <!-- jquery.mobile-menu js -->
    <script type="text/javascript" src="/js/mobile-menu.js"></script>

    <!--jquery-ui.min js -->
    <script type="text/javascript" src="/js/jquery-ui.js"></script>

    <!-- main js -->
    <script type="text/javascript" src="/js/main.js"></script>

    <!-- countdown js -->
    <script type="text/javascript" src="/js/countdown.js"></script>

<script>

  var timeLeft = $('.timeLeft').attr('content');
  gsecs1 = parseInt(timeLeft);
  var iid1 = "countbox_1";
  CountBack_slider(gsecs1, "countbox_1", 1);
</script>


<script>
  jQuery(document).ready(function () {
    $('#save').click(function () {
      //var answerKeys = $('#answer-key').val();
      //console.log(answers);
      var result = [];
      var amountQuiz = $('.amountQuiz').attr('content');
      for (i = 0; i < amountQuiz; i++) {
        key = "";
        keyBro = ".my-form-" + String(i + 1);
        //console.log($(keyBro).attr('type'))
        if ($(keyBro).attr('type') == "checkbox") {
          key = [];
          //console.log("checkbox")
          checkedBox = keyBro + ":checkbox:checked";
          $(checkedBox).each(function () {
            console.log($(this).val())
            key.push($(this).val());
          });
          if(key.length == 0)
          key = ""

        }
        else {
          if ($(keyBro).attr('type') == "radio") {
            checkedRadio = keyBro + ":checked";
            if (typeof $(checkedRadio).val() != "undefined") {
              key = $(checkedRadio).val();
            }

          }
          else {
            key = $(keyBro).val();
            // result.push({ key: key });
          }
        }
        result.push({ key: key });
      }

      console.log(result);
      var mockID = $(this).attr('mockID');
      var timeStart = $('#timeStart').val();
      console.log(timeStart)
      $.ajax({
        url: '/user/mocktest/ajax',
        type: 'POST',
        data: {
          _id: mockID, // $_POST['id'] = 22
          action: 'save',
          answerKeys: result,
          timeStart: timeStart
        },
        dataType: 'JSON',
        success: function (response) {
          // response : obj
          console.log(response);
          if (response.success) {
            $('.modal-title').text(response.message)
            $('.modal-body ').html(response.data + "<p>Lưu thành công</p>")
          }
          else {
            $('.modal-title').text('Error!')
            $('.modal-body').text(response.message)
          }
          //$('#myMessage').modal('show')
          // $('.reload_page_button').click(function () { window.location = '/products/' + response.data; });

        }
      });
    })


  });

</script>

<script>
 var mockID = $('#save').attr('mockID');
  var timeStart = parseInt($('#timeStart').val());
  var timeLeft = $('.timeLeft').attr('content');

  timer = setInterval(run, 10000);
  per = 10
  function run() {
    timeStart = timeStart + per;
    timeLeft = timeLeft - per;
    console.log(timeLeft)

    if (timeLeft <= 0) {
      clearInterval(timer);
      $('#frmCompletedTest').submit();
    }
    else {
      $('#timeStart').attr('value', timeStart);

      $.ajax({
        url: '/user/mocktest/ajax',
        type: 'POST',
        data: {
          _id: mockID, // $_POST['id'] = 22
          action: 'changeTimeLeft',
          timeLeft: timeLeft
        },
        dataType: 'JSON',
        success: function (response) {

          console.log(response);
        }
      });
    }
  }

  function submit() {
    //clearInterval(timer);
    $('#frmCompletedTest').submit();
  }
</script>


<script>
  jQuery(document).ready(function () {
    $('.audiolinks').change(function () {
      //console.log("lala")
      //console.log($('.audiolinks').val())
      url = "https://mielts.s3.ap-southeast-1.amazonaws.com/" + $('.audiolinks').val()
      var audio = document.getElementById('audio');
      var source = document.getElementById('audioSource');
      source.src = url
      audio.load();
    })
  });
</script>




    <script type="text/javascript">
      window.addEventListener("beforeunload", function (e) {
        var confirmationMessage = "\o/";
        console.log(confirmationMessage)
          (e || window.event).returnValue = confirmationMessage; //Gecko + IE
        return confirmationMessage;                            //Webkit, Safari, Chrome
      });
    </script>



</body>

<!-- Mirrored from htmlmystore.justthemevalley.com/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Mar 2020 08:13:18 GMT -->

</html>